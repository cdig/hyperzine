!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e||self).convert={})}(this,function(e){var r;e.ColorSpace=void 0,(r=e.ColorSpace||(e.ColorSpace={})).AdobeRGB="AdobeRGB",r.CMYK="CMYK",r.HSL="HSL",r.Lab="Lab",r.LCH="LCH",r.P3="P3",r.ProPhoto="ProPhoto",r.Rec2020="Rec2020",r.sRGB="sRGB",r.XYZ="XYZ";var n=function(r){return r===e.ColorSpace.AdobeRGB||r===e.ColorSpace.P3||r===e.ColorSpace.ProPhoto||r===e.ColorSpace.Rec2020||r===e.ColorSpace.sRGB};function t(){return(t=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}var o=function(e,r){var n=r.map(function(r){return r.reduce(function(r,n,t){return r+n*(e[t]||0)},0)});return[n[0],n[1],n[2]]},a=function(e,r){return t({},e,{values:e.values.map(r)})},u=function(e){return e<.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},c=function(e){return e>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e},l=function(r){return function(r){return{type:e.ColorSpace.XYZ,values:o(r.values,[[.4124564,.3575761,.1804375],[.2126729,.7151522,.072175],[.0193339,.119192,.9503041]])}}(function(e){return a(e,u)}(r))},p=function(r){return function(e){return a(e,c)}(function(r){return{type:e.ColorSpace.sRGB,values:o(r.values,[[3.2404542,-1.5371385,-.4985314],[-.969266,1.8760108,.041556],[.0556434,-.2040259,1.0572252]])}}(r))},s=function(e,r,n){return n<0&&(n+=6),n>=6&&(n-=6),n<1?(r-e)*n+e:n<3?r:n<4?(r-e)*(4-n)+e:e},i=216/24389,f=24389/27,v=[.96422,1,.82521],C=function(r){var n=r.values.map(function(e,r){return e/v[r]}).map(function(e){return e>i?Math.cbrt(e):(f*e+16)/116});return{type:e.ColorSpace.Lab,values:[116*n[1]-16,500*(n[0]-n[1]),200*(n[1]-n[2])]}},S=function(r){var n=r.values,t=n[0],o=n[1],a=n[2],u=[];return u[1]=(t+16)/116,u[0]=o/500+u[1],u[2]=u[1]-a/200,{type:e.ColorSpace.XYZ,values:[v[0]*(Math.pow(u[0],3)>i?Math.pow(u[0],3):(116*u[0]-16)/f),v[1]*(t>8?Math.pow((t+16)/116,3):t/f),v[2]*(Math.pow(u[2],3)>i?Math.pow(u[2],3):(116*u[2]-16)/f)]}},h=1.09929682680944,b=.018053968510807;function d(r,n){var t;switch(r.type){case e.ColorSpace.AdobeRGB:t=function(r){return function(r){return{type:e.ColorSpace.XYZ,values:o(r.values,[[.5766690429101305,.1855582379065463,.1882286462349947],[.29734497525053605,.6273635662554661,.07529145849399788],[.02703136138641234,.07068885253582723,.9913375368376388]])}}(function(e){return a(e,function(e){return Math.pow(Math.abs(e),563/256)*Math.sign(e)})}(r))}(r);break;case e.ColorSpace.CMYK:t=function(r){return l(function(r){var n=r.values,t=n[1],o=n[2],a=n[3],u=1-Math.min(1,n[0]*(1-a)+a),c=1-Math.min(1,t*(1-a)+a),l=1-Math.min(1,o*(1-a)+a);return{type:e.ColorSpace.sRGB,values:[u,c,l]}}(r))}(r);break;case e.ColorSpace.HSL:t=function(r){return l(function(r){var n=r.values,t=n[0],o=n[1],a=n[2];if(a<=.5)var u=a*(o+1);else u=a+o-a*o;var c=2*a-u,l=s(c,u,t+2),p=s(c,u,t),i=s(c,u,t-2);return{type:e.ColorSpace.sRGB,values:[l,p,i]}}(r))}(r);break;case e.ColorSpace.Lab:t=S(r);break;case e.ColorSpace.LCH:t=function(r){return function(r){return{type:e.ColorSpace.XYZ,values:o(r.values,[[.9555766,-.0230393,.0631636],[-.0282895,1.0099416,.0210077],[.0122982,-.020483,1.3299098]])}}(S(function(r){var n=r.values,t=n[1],o=n[2];return{type:e.ColorSpace.Lab,values:[n[0],t*Math.cos(o*Math.PI/180),t*Math.sin(o*Math.PI/180)]}}(r)))}(r);break;case e.ColorSpace.P3:t=function(r){return function(r){return{type:e.ColorSpace.XYZ,values:o(r.values,[[.4865709486482162,.26566769316909306,.1982172852343625],[.2289745640697488,.6917385218365064,.079286914093745],[0,.04511338185890264,1.043944368900976]])}}(function(e){return a(e,u)}(r))}(r);break;case e.ColorSpace.ProPhoto:t=function(r){return function(r){return{type:e.ColorSpace.XYZ,values:o(r.values,[[.7977604896723027,.13518583717574031,.0313493495815248],[.2880711282292934,.7118432178101014,8565396060525902e-20],[0,0,.8251046025104601]])}}(function(e){return a(e,function(e){return e<.031248?e/16:Math.pow(e,1.8)})}(r))}(r);break;case e.ColorSpace.Rec2020:t=function(r){return function(r){return{type:e.ColorSpace.XYZ,values:o(r.values,[[.6369580483012914,.14461690358620832,.1688809751641721],[.2627002120112671,.6779980715188708,.05930171646986196],[0,.028072693049087428,1.060985057710791]])}}(function(e){return a(e,function(e){return e<4.5*b?e/4.5:Math.pow((e+h-1)/h,2.4)})}(r))}(r);break;case e.ColorSpace.sRGB:t=l(r);break;case e.ColorSpace.XYZ:default:t=r}switch(n){case e.ColorSpace.AdobeRGB:return function(r){return function(e){return a(e,function(e){return Math.pow(Math.abs(e),256/563)*Math.sign(e)})}(function(r){return{type:e.ColorSpace.AdobeRGB,values:o(r.values,[[2.0415879038107465,-.5650069742788596,-.34473135077832956],[-.9692436362808795,1.8759675015077202,.04155505740717557],[.013444280632031142,-.11836239223101838,1.0151749943912054]])}}(r))}(t);case e.ColorSpace.CMYK:return function(r){return function(r){var n=r.values,t=n[0],o=n[1],a=n[2],u=1-Math.max(t,o,a);return{type:e.ColorSpace.CMYK,values:[1==u?0:(1-t-u)/(1-u),1==u?0:(1-o-u)/(1-u),1==u?0:(1-a-u)/(1-u),u]}}(p(r))}(t);case e.ColorSpace.HSL:return function(r){return function(r){var n,t,o=r.values,a=o[0],u=o[1],c=o[2],l=Math.min(a,u,c),p=Math.max(a,u,c),s=p-l,i=0;return(i=0==s?0:p==a?(u-c)/s%6:p==u?(c-a)/s+2:(a-u)/s+4)<0&&(i+=6),t=(p+l)/2,n=0==s?0:s/(1-Math.abs(2*t-1)),{type:e.ColorSpace.HSL,values:[i,n,t]}}(p(r))}(t);case e.ColorSpace.Lab:return C(t);case e.ColorSpace.LCH:return function(r){return function(r){var n=r.values,t=n[0],o=n[1],a=n[2],u=180*Math.atan2(a,o)/Math.PI;return{type:e.ColorSpace.LCH,values:[t,Math.sqrt(Math.pow(o,2)+Math.pow(a,2)),u>=0?u:u+360]}}(C(function(r){return{type:e.ColorSpace.XYZ,values:o(r.values,[[1.0478112,.0228866,-.050127],[.0295424,.9904844,-.0170491],[-.0092345,.0150436,.7521316]])}}(r)))}(t);case e.ColorSpace.P3:return function(r){return function(e){return a(e,c)}(function(r){return{type:e.ColorSpace.P3,values:o(r.values,[[2.493496911941425,-.9313836179191239,-.40271078445071684],[-.8294889695615747,1.7626640603183463,.023624685841943577],[.03584583024378447,-.07617238926804182,.9568845240076872]])}}(r))}(t);case e.ColorSpace.ProPhoto:return function(r){return function(e){return a(e,function(e){return e>.001953?Math.pow(e,1/1.8):16*e})}(function(r){return{type:e.ColorSpace.ProPhoto,values:o(r.values,[[1.3457989731028281,-.25558010007997534,-.05110628506753401],[-.5446224939028347,1.5082327413132781,.02053603239147973],[0,0,1.2119675456389454]])}}(r))}(t);case e.ColorSpace.Rec2020:return function(r){return function(e){return a(e,function(e){return e>b?h*Math.pow(e,1/2.4)-(h-1):4.5*e})}(function(r){return{type:e.ColorSpace.Rec2020,values:o(r.values,[[1.7166511879712674,-.35567078377639233,-.25336628137365974],[-.6666843518324892,1.6164812366349395,.01576854581391113],[.017639857445310783,-.042770613257808524,.9421031212354738]])}}(r))}(t);case e.ColorSpace.sRGB:return p(t);case e.ColorSpace.XYZ:default:return t}}var M={"a98-rgb":e.ColorSpace.AdobeRGB,"display-p3":e.ColorSpace.P3,"prophoto-rgb":e.ColorSpace.ProPhoto,rec2020:e.ColorSpace.Rec2020,sRGB:e.ColorSpace.sRGB},y=function(r){return r.includes("color(")?function(e){var r=e.match(/\((.*?)\)/);if(null===r)return null;var n=r[1].split(" "),t=n[0],o=n.slice(1).map(function(e){return Number.parseFloat(e)});return{type:M[t],values:[o[0],o[1],o[2]]}}(r):r.includes("hsl(")?function(r){var n=r.match(/^[+-]?\d+(\.\d+)?$/g);if(null===n||n.length<3)return null;var t=n.map(function(e){return e.includes("%")?Number.parseFloat(e)/100:(r=e,n=Number.parseFloat(r),r.includes("grad")?n/=400:r.includes("rad")?n/=2*Math.PI:r.includes("turn")?n/=1:n/=360,6*(1===n?0:n));var r,n});return{type:e.ColorSpace.HSL,values:[t[0],t[1],t[2]]}}(r):r.includes("lab(")?function(r){var n=r.match(/-?[\d.%?]+/g);if(null===n||n.length<3)return null;var t=n.map(Number.parseFloat);return{type:e.ColorSpace.Lab,values:[t[0],t[1],t[2]]}}(r):r.includes("lch(")?function(r){var n=r.match(/-?[\d.%?]+/g);if(null===n||n.length<3)return null;var t=n.map(Number.parseFloat);return{type:e.ColorSpace.LCH,values:[t[0],t[1],t[2]]}}(r):r.startsWith("#")?function(r){var n=r.replace("#","").match(r.length<7?/.{1}/g:/.{2}/g);if(null===n||n.length<3)return null;var t=n.map(function(e){return Number.parseInt(e,16)/(1===e.length?15:255)});return{type:e.ColorSpace.sRGB,values:[t[0],t[1],t[2]]}}(r):function(r){var n=r.match(/-?[\d.%?]+/g);if(null===n||n.length<3)return null;var t=n.map(function(e){return e.includes("%")?Number.parseFloat(e)/100:Number.parseFloat(e)/255});return{type:e.ColorSpace.sRGB,values:[t[0],t[1],t[2]]}}(r)},m=function(e,r){var n=d(e,r),t=5e-6;return n.values.reduce(function(e,r){return e&&r>=0-t&&r<=1+t},!0)};e.convertCSSColor=function(r,o){var a=y(r);return null===a?null:(a.type===e.ColorSpace.LCH&&n(o)&&(a=function(e,r){var n=e.values,o=n[0],a=n[1],u=n[2];if(m(e,r))return e;var c=a,l=0;for(a/=2;c-l>1e-4;)m(t({},e,{values:[o,a,u]}),r)?l=a:c=a,a=(c+l)/2;return t({},e,{values:[o,a,u]})}(a,o)),function(r){switch(r.type){case e.ColorSpace.AdobeRGB:case e.ColorSpace.P3:case e.ColorSpace.ProPhoto:case e.ColorSpace.Rec2020:return function(e,r){var n=e.values.map(function(e){return e.toFixed(4)}),t=n[0],o=n[1],a=n[2],u=Object.entries(M).find(function(r){return r[1]===e.type});return"color("+(u?u[0]:null)+" "+t+" "+o+" "+a+")"}(r);case e.ColorSpace.HSL:return function(e,r){var n=e.values.map(function(e,r){return 0===r?(e/6*360).toFixed(4)+"deg":(100*e).toFixed(2)+"%"});return"hsl("+n[0]+" "+n[1]+" "+n[2]+")"}(r);case e.ColorSpace.Lab:return function(e,r){var n=e.values.map(function(e,r){return e.toFixed(0===r?2:4)+(0===r?"%":"")});return"lab("+n[0]+" "+n[1]+" "+n[2]+")"}(r);case e.ColorSpace.LCH:return function(e,r){var n=e.values.map(function(e,r){return e.toFixed(0===r?2:4)+(0===r?"%":"")});return"lch("+n[0]+" "+n[1]+" "+n[2]+")"}(r);case e.ColorSpace.sRGB:return function(e,r){var n=e.values.map(function(e){return(100*e).toFixed(2)+"%"});return"rgb("+n[0]+" "+n[1]+" "+n[2]+")"}(r)}}(d(a,o)))},e.convertColorToSpace=d,e.isRGBBased=n,e.parse=y});
//# sourceMappingURL=color-spaces-convert.umd.js.map
